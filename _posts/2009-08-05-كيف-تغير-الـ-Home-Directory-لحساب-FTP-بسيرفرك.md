---
title: كيف تغير الـ Home Directory لحساب FTP بسيرفرك
date: 2009-08-05T21:31:12+03:00
author: Mo9a7i
layout: post
tags:
  - تقنية
  - حماية
---

السلام عليكم ورحمة الله وبركاته

هالتدوينه لأصحاب السيرفرات واللي يحبون يلعبون بال settings ويتعلمون حاجات جديدة بعالم إدارة السيرفرات اللي مازلت وسوف أظل داج فيه مهما سويت.

> ملاحظة: إذا ماكنت تحب كثرة الكلام والهرج والمرج, إنزل تحت لين تحصل السطر الكبير

كنت شغال على project صغيرون كذا علشان أسوي نسخ إحتياطي خارجي لعملائي بشكل آلي بدون ما أقعد كل مرة أدخل السيرفر وأطلب منه إنه ياخذ نسخة خارجية

كانت الخطة اللي فكرت فيها هي التالي:

يكون عندي أول شي سيرفر خارجي,

هذا السيرفر الخارجي, يكون محمي بشكل خرافي وإسكندنافي بحيث مايكون فيه ولا أي باب مفتوح, بس يكون فيه دريشة (نافذة) وعليها قفل عجايز مع أعتى التقنيات الجديدة في الحماية كبصمة اليد والعين ورقم سري.

بالعربي مركب عليها بوابة خزنة بنك على الدريشة وفقط ادخل من الدريشة واطلع ,

المهم هذا السيرفر كنت أحتاجه يشبك FTP بالسيرفرات اللي عندي

ولما يدخل FTP يفتح له الروت دايركتوري أو عالأقل الباك اب دايركتوري `/backup` مثلا

طيب كيف أسوي كذا ؟

لازم أنشيء حساب بالسيرفر طبعاً , وأنا استخدم لوحة تحكم cPanel وطبيعي أول ما أنشئ حساب بإسم backupu مثلاً السي بنل راح يعطيه ال home directory بالشكل هذا `/home/backupu`

**طيب كيف نغير هالسالفة؟**

بحثت صراحة كثير وحاولت أغير هالشغلة من ملف `passwd` لكن مامشي الحال اكتشفت كذا بالصدفة وعن طريق الخطأ جاني إلهام وقال لي ياموصاحي, ترا إنت قاعد تعدل بالمكان الخطأ ,, لازم تغير الهوم دايركتوري من إعدادات ال FTP

طبعاً أنا برنامج الإف تي بي على سيرفري هو `pure-ftpd`

حاولت وبحثت وقرأت, لقيت حاجات كثير وحلول معقدة وزحمة لكن عن طريق الصدفة طحت على هالموقع <http://blog.raamdev.com/2006/09/20/howto-change-home-directory-for-a-virtual-ftp-user-on-a-server-running-pure-ftpd>

## ملاحظة: هذا هو السطر الكبير حق اللي مايحبون الكلام الكثير

الحل ياجماعة الربع هو:

على الرغم من إني أستخدم `pure-ftpd` لكن الإعدادات اللي أبغاها راح تكون بمجلد `/etc/proftpd`

داخل هالمجلد فيه لكل يوزر ملف

سويت كذا:

pico `/etc/proftpd/backupu`

وحصلت السطر التالي `backupu:$1$cwFeHbQ$7gQ5wDeCadq0d8aHs/:32024:32026::/home/backupu:/bin/ftpsh`

زي مانتوا ملاحظين السطر هذا يشبه أسطر اليوزرات بملف `/etc/passwd`

بكل بساطة بدل

`/home/backupu`
بأي مجلد تحب إن الإف تي بي يفتح عليه من هاليوزر, أنا سويت كذا:

`/backup`
وسكرت الملف وحفظته وعملت رستارت لل pure-ftpd

```shell
service pure-ftpd restart
```

وتم العمل

لما أدخل إف تي بي راح يفتح لي مجلد /backup/ بالسيرفر

أتمنى هالتدوينة تنفع البعض وانا ادري إن أكثر اللي يسحبون رجولهم هنا مالهم بهالسوالف, 

سيو على خير

Mo9a7i
